{% extends "base.html" %}
{% block content %}

{% include 'student_steps.html' %}

<section class="card form-container">
    <h2 class="glow-title">القسم الأول: المعلومات الشخصية</h2>

    <form method="POST" enctype="multipart/form-data">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

        <div class="input-grid-2">
            <div class="input-box">
                <label>الاسم الكامل (عربي)</label>
                <input type="text" name="full_name" value="{{ data.full_name if data else '' }}" required placeholder="مثال: علي محمد حسين">
            </div>
            <div class="input-box">
                <label>Full Name (English)</label>
                <input type="text" name="full_name_en" value="{{ data.full_name_en if data else '' }}" placeholder="Example: Ali Mohammed Hussein" style="direction: ltr; text-align: left;">
            </div>
        </div>

        <div class="input-grid-2">
            <div class="input-box">
                <label>القسم (عربي)</label>
                <input type="text" name="department" value="{{ data.department if data else 'علوم الحاسوب' }}">
            </div>
            <div class="input-box">
                <label>Department (English)</label>
                <input type="text" name="department_en" value="{{ data.department_en if data else 'Computer Science' }}" style="direction: ltr; text-align: left;">
            </div>
        </div>

        <div class="input-box">
            <label>الكلية (College)</label>
            <input type="text" name="college" value="{{ data.college if data else 'كلية علوم الحاسوب والرياضيات' }}">
        </div>

        <div class="input-grid-2">
            <div class="input-box">
                <label>المرحلة الدراسية (عربي)</label>
                <select name="level" id="level_ar" onchange="syncLevel()">
                    <option value="" disabled selected>اختر المرحلة</option>
                    <option value="ماجستير" {% if data and data.level == 'ماجستير' %}selected{% endif %}>ماجستير</option>
                    <option value="دكتوراه" {% if data and data.level == 'دكتوراه' %}selected{% endif %}>دكتوراه</option>
                    <option value="دبلوم عالي" {% if data and data.level == 'دبلوم عالي' %}selected{% endif %}>دبلوم عالي</option>
                </select>
            </div>

            <div class="input-box">
                <label>Study Level (English)</label>
                <select name="level_en" id="level_en" style="direction: ltr;">
                    <option value="" disabled selected>Select Level</option>
                    <option value="M.Sc." {% if data and data.level_en == 'M.Sc.' %}selected{% endif %}>M.Sc.</option>
                    <option value="Ph.D." {% if data and data.level_en == 'Ph.D.' %}selected{% endif %}>Ph.D.</option>
                    <option value="Higher Diploma" {% if data and data.level_en == 'Higher Diploma' %}selected{% endif %}>Higher Diploma</option>
                </select>
            </div>
        </div>

        <div class="input-grid-2">
            <div class="input-box">
                <label>نوع الدراسة</label>
                <select name="study_type">
                    <option value="صباحي" {% if data and data.study_type == 'صباحي' %}selected{% endif %}>صباحي</option>
                    <option value="مسائي" {% if data and data.study_type == 'مسائي' %}selected{% endif %}>مسائي</option>
                </select>
            </div>
            
            <div class="input-box">
                <label>الرقم الجامعي (ID)</label>
                <input type="text" name="student_id" value="{{ data.student_id if data else '' }}" required placeholder="2023001">
            </div>
        </div>

        <div class="input-grid-2">
            <div class="input-box">
                <label>البريد الإلكتروني</label>
                <input type="email" name="email" value="{{ data.email if data else '' }}">
            </div>
            <div class="input-box">
                <label>رقم الهاتف</label>
                <input type="text" name="phone" value="{{ data.phone if data else '' }}">
            </div>
        </div>

        <div class="input-box">
            <label>صورة الطالب الشخصية</label>
            <input type="file" name="student_image" accept="image/*">
            {% if data and data.image_filename %}
                <p style="color: #00ff90; font-size: 12px; margin-top: 5px;">* توجد صورة محفوظة حالياً</p>
            {% endif %}
        </div>

        <div class="btn-box form-actions">
            <span></span> 
            <button class="next-btn" type="submit">حفظ والتالي</button>
        </div>

    </form>
</section>

<script>
    function syncLevel() {
        var arSelect = document.getElementById("level_ar");
        var enSelect = document.getElementById("level_en");
        
        var selectedValue = arSelect.value;
        
        if (selectedValue === "ماجستير") {
            enSelect.value = "M.Sc.";
        } else if (selectedValue === "دكتوراه") {
            enSelect.value = "Ph.D.";
        } else if (selectedValue === "دبلوم عالي") {
            enSelect.value = "Higher Diploma";
        }
    }
</script>

{% endblock %}