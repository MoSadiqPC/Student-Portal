{% extends "base.html" %}
{% block content %}

<section class="card">
    <h2 class="glow-title">๐ ุณุฌู ุงูุจุญูุซ ุงูุนูููุฉ</h2>

    <form method="GET" class="filter-form search-bar-styled">
        
        <div class="search-group dropdown-group">
            <select name="filter_type" class="search-select">
                <option value="student_name" {% if filter_type == 'student_name' %}selected{% endif %}>ุงุณู ุงูุทุงูุจ</option>
                <option value="supervisor" {% if filter_type == 'supervisor' %}selected{% endif %}>ุงุณู ุงููุดุฑู</option>
                <option value="title" {% if filter_type == 'title' %}selected{% endif %}>ุนููุงู ุงูุจุญุซ/ุงูุฃุทุฑูุญุฉ</option>
                <option value="date" {% if filter_type == 'date' %}selected{% endif %}>ุชุงุฑูุฎ ุงูุจุฏุก</option>
                <option value="id" {% if filter_type == 'id' %}selected{% endif %}>ุงูุฑูู ุงูุฌุงูุนู (ID)</option>
            </select>
        </div>

        <div class="search-group input-group-search">
            <input type="text" name="q" placeholder="ุฃุฏุฎู ูููุฉ ุงูุจุญุซ..." value="{{ request.args.get('q', '') }}">
        </div>

        <div class="search-group btn-group-search">
            <button type="submit" class="btn search-btn">๐ ุจุญุซ</button>
            {% if request.args.get('q') %}
                <a href="{{ url_for('research_registry') }}" class="btn back-btn" style="background: #ff4f4f;">ุฅูุบุงุก</a>
            {% endif %}
        </div>
    </form>

    <div class="table-responsive">
        <table class="data-table">
            <thead>
                <tr>
                    <th>ุงูุฑูู ุงูุฌุงูุนู (ID)</th>
                    <th>ุงุณู ุงูุทุงูุจ</th>
                    <th>ุงุณู ุงููุดุฑู</th>
                    <th>ุนููุงู ุงูุจุญุซ</th>
                    <th>ุชุงุฑูุฎ ุงูุจุฏุก</th>
                    <th>ููู ุงูุจุญุซ</th>
                </tr>
            </thead>
            <tbody>
                {% if researches %}
                    {% for r in researches %}
                    <tr>
                        <td style="font-weight: bold; color: #00ff90;">{{ r.uid }}</td>
                        <td>{{ r.full_name }}</td>
                        <td>{{ r.supervisor }}</td>
                        <td>{{ r.title }}</td>
                        <td>{{ r.start_date or '---' }}</td>
                        <td class="actions-cell">
                            {% if r.research_filename %}
                                <a href="{{ url_for('uploaded_file', filename=r.research_filename) }}" target="_blank" class="action-btn edit-link">
                                    ๐ ุนุฑุถ ุงูููู
                                </a>
                            {% else %}
                                <span style="color: #777;">ูุง ููุฌุฏ ููู</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="6" class="no-data-row">ูุง ุชูุฌุฏ ุจุญูุซ ูุทุงุจูุฉ ูุนูููุฉ ุงูุจุญุซ</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</section>

{% endblock %}